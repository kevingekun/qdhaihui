
(function(){window.GDT=window.GDT||{};var J=jQuery,each=J.each;GDT.commpath='/qzone/biz/gdt/castcomm';(function($){var o=$({});$.subscribe=function(){o.on.apply(o,arguments);};$.unsubscribe=function(){o.off.apply(o,arguments);};$.publish=function(){o.trigger.apply(o,arguments);};}(J));(function(){GDT.event={bind:function(){var o=J(this);o.bind.apply(o,arguments);return o;},unbind:function(){var o=J(this);o.unbind.apply(o,arguments);return o;},trigger:function(){var o=J(this);o.trigger.apply(o,arguments);return o;}};})();(function(){var a={};a.setFieldValue=function(fields,v,cnt){var ipt,type,field,val,d,fval;each(fields,function(k,f){field=f;if(J.isArray(f)){field=(typeof f[1]=='undefined')?f[0]:f[1];}
fval=v[field];a.setVal(f,fval,cnt);});};a.setVal=function(f,fval,cnt){var ipt,type,field,val,d,_g=GDT.util.getDomGetter(cnt);if(J.isArray(f)){val=(typeof fval!='undefined')?fval:'';_g('#'+f[0]).val(val);}else{ipt=_g('#'+f);if(ipt.size()<1){ipt=_g('[name='+f+']');}
type=ipt.attr('type');val=(typeof fval!='undefined')?fval:'';if(_fieldbuild[f]){var builder=a.datadeal[_fieldbuild[f]];if(builder){val=builder.disbuild(val);}}
if(type=='radio'){_g('[name='+f+'][value='+val+']').prop('checked','checked');}else if(type=='checkbox'){var listmap={};if(J.isArray(val)){each(val,function(ck,cv){listmap[cv+'']=1;});}else{listmap[val+'']=1;}
_g('[name='+f+']').each(function(k,v){var cobj=_g(v),cv=v.value;var checked=!!listmap[cv+''];cobj.prop('checked',checked);});}else{ipt.each(function(i,el){if(el.tagName.toUpperCase()==='SELECT'){J(el).find('option[value="'+val+'"]').attr('selected','selected');}else{ipt.val(val);}});}}};var _fieldbuild={};a.setFieldBuilder=function(field,type){if(a.datadeal[type]){_fieldbuild[field]=type;}};a.datadeal={'binary_plus':{build:function(arr){val=0;each(arr,function(k,v){val+=parseInt(v,10);});return val;},disbuild:function(val){var darr=[];var arr=val.toString(2).split('').reverse();each(arr,function(k,v){if(parseInt(v,10)){darr.push(1<<k);}});return darr;}},'array':{build:function(arr){return arr.join(',');},disbuild:function(val){return val.split(',');}}};a.clearFieldValue=function(fields,cnt){var _g=GDT.util.getDomGetter(cnt);each(fields,function(k,f){_g('#'+f).val('');});};a.setFieldsAttr=function(fields,attr,value,cnt){var _g=GDT.util.getDomGetter(cnt);each(fields,function(k,f){_g('#'+f).attr(attr,value);});};a.getFieldsData=function(fields,cnt){var _g=GDT.util.getDomGetter(cnt);var data={};var o,name,type,clist,val,varr;for(var i=0,len=fields.length;i<len;i++){val='';var f=fields[i];if(J.isArray(f)){clist=f[0];type=f[1];if(type=='check'){each(clist,function(k,v){data[v]=a.getFieldData(v,cnt);});}}else{o=_g('#'+f);type=o.attr('type');name=o.attr('name');if(o.size()<1){o=_g('[name='+f+']');}
name=name||f;data[name]=a.getFieldData(f,cnt);}}
return data;};a.getFieldData=function(field,cnt){var _g=GDT.util.getDomGetter(cnt);var o,name,type,val,varr,fnum;val='';var f=field;o=_g('#'+f);if(o.size()<1){o=_g('[name='+f+']');}
type=o.attr('type');name=o.attr('name');name=name||f;if(type=='radio'){val=_g('[name='+name+']:checked').val();}else if(type=='checkbox'){varr=[];_g('[name='+name+']:checked').each(function(k,el){varr.push(el.value);});val=varr;}else{val=(o.size()>0)?o.val():'';}
if(_fieldbuild[f]){var builder=a.datadeal[_fieldbuild[f]];if(builder){val=builder.build(val);}}
return val;};a.setValue=a.setFieldData=a.setVal;a.setFieldsData=a.setFieldValue;a.getValue=a.getFieldData;a.setFieldAsso=function(field,valuesDisplay,assocont,callback,opts){opts=opts||{};var _g=GDT.util.getDomGetter(opts.cnt);var f=function(){var v=a.getFieldData(field);var ret=(J.inArray(v,valuesDisplay)>=0);assocont&&_g('#'+assocont)[ret?'show':'hide']();if(callback){callback(ret);}};var fobj,type,tagname;a._fieldAsso[field]=a._fieldAsso[field]||[];a._fieldAsso[field].push(f);fobj=_g('#'+field);if(fobj.size()<1){fobj=_g('[name='+field+']');}
if(fobj.size()<1){return;}
type=fobj.attr('type').toLowerCase();tagname=fobj.prop('tagName').toLowerCase();if(tagname=='select'){fobj.bind('change',f);}else if(type=='radio'){_g('[name='+field+']').bind('click',f);}};a._fieldAsso={};a.fireFieldAsso=function(field){var l=a._fieldAsso[field];if(l){each(l,function(k,v){v();});}};a.uploadid=0;a.uploadImg=function(url,data,file,cbname,cb,ecb){file=typeof file=='object'?file:$(file);data['_file']={1:file};QBL.uploader(url,data,cb,{callbackName:cbname,onError:ecb});};GDT.form=a;})();(function(){var $=jQuery;CssFileUrlCache={},domainPrefix='qq.com';var plugin={emptyFn:function(){},ua:(function(){var ua={},agent=navigator.userAgent,nv=navigator.appVersion;if(window.ActiveXObject){ua.ie=6;(window.XMLHttpRequest||(agent.indexOf('MSIE 7.0')>-1))&&(ua.ie=7);(window.XDomainRequest||(agent.indexOf('Trident/4.0')>-1))&&(ua.ie=8);(agent.indexOf('Trident/5.0')>-1)&&(ua.ie=9);(agent.indexOf('Trident/6.0')>-1)&&(ua.ie=10);ua.isBeta=navigator.appMinorVersion&&navigator.appMinorVersion.toLowerCase().indexOf('beta')>-1;if(ua.ie<7){try{document.execCommand('BackgroundImageCache',false,true);}catch(ign){}}}else if(document.getBoxObjectFor||typeof(window.mozInnerScreenX)!='undefined'){var r=/(?:Firefox|GranParadiso|Iceweasel|Minefield).(\d+\.\d+)/i;ua.firefox=parseFloat((r.exec(agent))[1],10);}else if(!navigator.taintEnabled){var m=/AppleWebKit.(\d+\.\d+)/i.exec(agent);ua.webkit=m?parseFloat(m[1],10):(document.evaluate?(document.querySelector?525:420):419);if((m=/Chrome.(\d+\.\d+)/i.exec(agent))||window.chrome){ua.chrome=m?parseFloat(m[1],10):'2.0';}else if((m=/Version.(\d+\.\d+)/i.exec(agent))||window.safariHandler){ua.safari=m?parseFloat(m[1],10):'3.3';}
ua.air=agent.indexOf('AdobeAIR')>-1?1:0;ua.isiPod=agent.indexOf('iPod')>-1;ua.isiPad=agent.indexOf('iPad')>-1;ua.isiPhone=agent.indexOf('iPhone')>-1;}else if(window.opera){ua.opera=parseFloat(window.opera.version(),10);}else{ua.ie=6;}
if(!(ua.macs=agent.indexOf('Mac OS X')>-1)){ua.windows=((m=/Windows.+?(\d+\.\d+)/i.exec(agent)),m&&parseFloat(m[1],10));ua.linux=agent.indexOf('Linux')>-1;ua.android=agent.indexOf('Android')>-1;}
ua.iOS=agent.indexOf('iPhone OS')>-1;!ua.iOS&&(m=/OS (\d+(?:_\d+)*) like Mac OS X/i.exec(agent),ua.iOS=m&&m[1]?true:false);return ua;})(),setScrollTop:function(pos,dur){$('html, body').animate({scrollTop:pos||0},dur||500);},insertCSSLink:function(url,opts){var sid,doc,t,cssLink,head;if(CssFileUrlCache[url]){return;}
if(typeof opts=="string"){sid=opts;}
opts=(typeof opts=="object")?opts:{};sid=opts.linkID||sid;doc=opts.doc||document;head=doc.getElementsByTagName("head")[0];cssLink=((t=doc.getElementById(sid))&&(t.nodeName=="LINK"))?t:null;if(!cssLink){cssLink=doc.createElement("link");sid&&(cssLink.id=sid);cssLink.rel=cssLink.rev="stylesheet";cssLink.type="text/css";cssLink.media=opts.media||"screen";head.appendChild(cssLink);}
try{url&&(cssLink.href=url);}catch(ign){}
CssFileUrlCache[url]=true;return(plugin.ua.ie<9&&cssLink.sheet)||cssLink;},escHTML:function(s){var l={'&amp;':/&/g,'&lt;':/</g,'&gt;':/>/g,'&#039;':/\x27/g,'&quot;':/\x22/g};for(var i in l){s=s.replace(l[i],i);}
return s;},restXHTML:function(s){var l={'<':/&lt;/g,'>':/&gt;/g,'\x27':/&(?:apos|#0?39);/g,'\x22':/&quot;/g,'&':/&amp;/g};for(var i in l){s=s.replace(l[i],i);}
return s;},format:function(template,data){var _regex=/\{([\w\.]*)\}/g;return template.replace(_regex,function(str,key){var keys=key.split('.'),value=data[keys.shift()];$.each(keys,function(){value=value[this];});return(value===null||value===undefined)?'':value;});},cut:function(str,bitLen,tails){str=String(str);bitLen-=0;tails=tails||'';if(isNaN(bitLen)){return str;}
var len=str.length,i=Math.min(Math.floor(bitLen/2),len),cnt=plugin.getRealLen(str.slice(0,i));for(;i<len&&cnt<bitLen;i++){cnt+=1+(str.charCodeAt(i)>255);}
return str.slice(0,cnt>bitLen?i-1:i)+(i<len?tails:'');},getRealLen:function(s,isUTF8){var r0=/[^\x00-\xFF]/g,r1=/[\x00-\xFF]/g;if(typeof(s)!='string'){return 0;}
if(!isUTF8){return s.replace(r0,"**").length;}else{var cc=s.replace(r1,"");return(s.length-cc.length)+(encodeURI(cc).length/3);}},cookie:{set:function(name,value,domain,path,hour){if(hour){var expire=new Date();expire.setTime(expire.getTime()+3600000*hour);}
document.cookie=name+"="+value+"; "+(hour?("expires="+expire.toGMTString()+"; "):"")+(path?("path="+path+"; "):"path=/; ")+(domain?("domain="+domain+";"):("domain="+domainPrefix+";"));return true;},get:function(name){var r=new RegExp("(?:^|;+|\\s+)"+name+"=([^;]*)"),m=document.cookie.match(r);return(!m?"":m[1]);},del:function(name,domain,path){document.cookie=name+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(path?("path="+path+"; "):"path=/; ")+(domain?("domain="+domain+";"):("domain="+domainPrefix+";"));}},getACSRFToken:function(){var hash=5381,str=plugin.cookie.get("skey");for(var i=0,len=str.length;i<len;++i){hash+=(hash<<5)+str.charCodeAt(i);}
return hash&0x7fffffff;},formPost:function(url,data,callback){function transdata(d){var r={};if(typeof d=='string'&&(d=d.split('&'))){for(var i=0;i<d.length;i++){var kv=d[i].split('=');r[kv[0]]=kv[1];}}else{r=d;}
return r;}
var def={callback:function(){},onerror:function(){},charset:'utf-8',url:url,pIstanceKey:'pid'+Math.floor(Math.random()*100000)};if(typeof callback=='undefined'){callback=data;}
if(typeof data=='function'){callback=data;data='';}
$.extend(def,typeof callback=='function'?{callback:callback}:callback);var ifr=document.createElement('iframe'),ie=plugin.ua.ie,ifrurl,ifrHTML;ifrHTML='<!DOCTYPE html><html lang="zh-cn"><head><meta http-equiv="content-type" content="text/html; charset='+def.charset+'" /><meta charset="'+def.charset+'" />';if(ie){ifrurl='javascript:document.open();document.domain="'+document.domain+'";var me=parent["'+def.pIstanceKey+'"];document.write(me.ifrHTML);document.close();';}
ifrHTML=ifrHTML+'<script type="text/javascript">'+(ie&&('document.charset="'+def.charset+'"')||'')+';document.domain="'+document.domain+'";frameElement.submited=void(0);frameElement.state="sending";<\/script><\/head><body>';ifrHTML=ifrHTML+'<form action="'+url+(url.indexOf('?')>-1?'&':'?')+'g_tk='+plugin.getACSRFToken()+'" accept-charset="'+def.charset+'" id="p" enctype="application/x-www-form-urlencoded;charset='+def.charset+'" method="post">';ifrHTML=ifrHTML+'<input type="hidden" name="qzreferrer" id="qzreferrer" />';for(var i in data){ifrHTML=ifrHTML+'<input type="hidden" name="'+i+'" id="'+i+'" value="" />'}
ifrHTML=ifrHTML+'<\/form><script type="text/javascript">var me=parent["'+def.pIstanceKey+'"];doc=document,f=doc.getElementById("p"),d=me.jsonData;'
ifrHTML=ifrHTML+'for(var i in d){doc.getElementById(i).value=decodeURIComponent(d[i]);}doc.getElementById("qzreferrer").value=parent.location.href;f.submit();me.postTime=+new Date;frameElement.submited=true;frameElement.state="sended";<\/script><\/body><\/html>';window[def.pIstanceKey]=def.ifrInfo={ifrHTML:ifrHTML,ifrurl:ifrurl,startTime:+new Date,postTime:0,endTime:0,ifr:ifr,jsonData:transdata(data)};ifr.style.cssText="width:0;height:0;border-width:0;display:none;";function _clear(th){th.ifr.parentNode==document.body&&document.body.removeChild(th.ifr);th.ifr.onload=th.ifr.onreadystatechange=null;}
ifr.callback=(function(th){return function(){th.ifrInfo.endTime=+new Date;th.callback.apply(th,arguments);_clear(th.ifrInfo);}})(def);document.body.appendChild(ifr);ifr.onload=ifr.onreadystatechange=(function(th){return function(){if(this.readyState=='complete'||typeof this.readyState=='undefined'){if('sended'.indexOf(this.state)>-1){th.ifrInfo.endTime=+new Date;th.onerror.call(th,th);_clear(th.ifrInfo);}}};})(def);ifr.state="initing";ie?setTimeout((function(th){return function(){th.ifrInfo.ifr.state='inited';th.ifrInfo.ifr.src=th.ifrInfo.ifrurl;}})(def),10):(ifr.src='javascript:;');if(!ie){var d=ifr.contentDocument||ifr.contentWindow.document;if(d){d.open();d.write(def.ifrInfo.ifrHTML);d.close();}}},jsonGet:function(url,data,callback){function transdata(data){var ar=[];if(typeof data=='object'){for(var i in data){ar.push(i+'='+encodeURIComponent(data[i]));}}
else{ar.push(data);}
return ar.join('&');}
if(typeof callback=='undefined'){callback=data;}
if(typeof data=='function'){callback=data;data='';}
var def={callback:function(){},url:url+(data&&(url.indexOf('?')>-1?('&'+transdata(data)):('?'+transdata(data))))+'&g_tk='+plugin.getACSRFToken(),charset:'utf-8',cfn:'_Callback',callback:function(){},onerror:function(){},sender:null};$.extend(def,typeof callback=='function'?{callback:callback}:callback);if(plugin.ua.ie&&(typeof document.documentMode=='undefined'||document.documentMode<10)){var df=document.createDocumentFragment(),sender=document.createElement("script");def.sender=sender;sender.charset=def.charset;def.df=df;var clear=function(o){o.df['callback']=o.df['_Callback']=o.df[def.cfn]=null;o.df=null;sender.onreadystatechange=sender.onerror=null;};df['callback']=df['_Callback']=df[def.cfn]=(function(th){return(function(){th.callback.apply(th,arguments);clear(th);});})(def);if(plugin.ua.ie<9){sender.onreadystatechange=(function(th){return(function(){if(th.sender&&th.sender.readyState=="loaded"){try{th.onerror();}catch(ignore){}}});})(def);}else{sender.onerror=(function(th){return(function(){try{th.onerror();}catch(ignore){}});})(this);}
this._waiting=true;df.appendChild(sender);sender.src=def.url;}else{window[def.cfn]=function(){plugin.jsonGet.args=arguments;};var callback=(function(th){return function(){th.callback.apply(th,plugin.jsonGet.args||QZFL.JSONGetter.args);plugin.jsonGet.args=null;}})(def);var _ecb=(function(th){return(function(){th.onerror.call(th,th);});})(def);var h=document.getElementsByTagName('head'),node;h=h&&h[0]||document.body;if(!h)
return;var baseElement=h.getElementsByTagName('base')[0];node=document.createElement('script');node.charset=this._charset||'utf-8';node.onload=function(){this.onload=null;if(node.parentNode){h.removeChild(node);}
callback();node=void(0);};node.onerror=function(){this.onerror=null;_ecb();if(node.parentNode){h.removeChild(node);}}
node.src=def.url;baseElement?h.insertBefore(node,baseElement):h.appendChild(node);}},timeFormatString:function(date,ptn,baseTime){try{date=date.getTime?date:(new Date(date));}catch(ign){return'';}
var map={y:['getYear',31104000000],Y:['getFullYear',31104000000,'\u5E74\u524D'],M:['getMonth',2592000000,'\u4E2A\u6708\u524D'],d:['getDate',86400000,'\u5929\u524D'],h:['getHours',3600000,'\u5C0F\u65F6\u524D'],m:['getMinutes',60000,'\u5206\u949F\u524D'],s:['getSeconds',1000,'\u79D2\u524D']},unt=['Y','M','d','h','m','s'],rel=false,t,delta,v;if(!ptn){baseTime=baseTime||(window.g_NowTime?new Date(window.g_NowTime*1000):new Date());delta=Math.abs(date-baseTime);for(var i=0,len=unt.length;i<len;++i){t=map[unt[i]];if(delta>t[1]){return Math.floor(delta/t[1])+t[2];}}
return"刚刚";}else{return ptn.replace(/\{([_yYMdhms]{1,2})(?:\:([\d\w\s]))?\}/g,function(a,b,c){(rel=b.charAt(0)=='_')&&(b=b.charAt(1));if(!map[b]){return a;}
if(!rel){v=date[map[b][0]]();b=='y'&&(v%=100);b=='M'&&v++;return v<10?plugin.fillLength(v,2,c):v.toString();}else{return Math.floor(Math.abs(date-baseTime)/map[b][1]);}});}},fillLength:function(source,l,ch,isRight){if((source=String(source)).length<l){var ar=new Array(l-source.length);ar[isRight?'unshift':'push'](source);source=ar.join(ch||'0');}
return source;}};J.extend(plugin);})();GDT.form.select=function(id,options,opts){var node,selectNode,valueNode,optionsNode,optionsList=[],selected,_m=this;opts=opts||{};typeof opts.name==='undefined'&&(opts.name=id);typeof opts.value==='undefined'&&(opts.value='');if(id in GDT.form.select._instance){_m=GDT.form.select._instance[id];_m.valueNode.value=opts.value;_m.show();return _m.node;}
node=document.createElement('div');node.className='drop_down_box';node.style.zIndex=100-GDT.form.select._counter;selectNode=document.createElement('a');selectNode.className='selected_item choose_target';selectNode.href='javascript:;';selectNode.setAttribute('opt','select');valueNode=document.createElement('input');valueNode.setAttribute('type','hidden');valueNode.id=id;valueNode.name=opts.name;valueNode.value=opts.value;optionsNode=document.createElement('ul');optionsNode.className='item_list none';opts.width&&(selectNode.style.width=(opts.width-14)+'px',optionsNode.style.width=opts.width+'px');each(options,function(optname,optvalue){selected=opts.value==optvalue?'class="selected"':'';optionsList.push('<li '+selected+'><a href="javascript:;" opt="option" value="'+optvalue+'">'+optname+'</a></li>');});optionsNode.innerHTML=optionsList.join('');node.appendChild(selectNode);node.appendChild(valueNode);node.appendChild(optionsNode);QBL.delegate(node,'click',{'select':function(evt){_m.showOptions();console.log(evt);J.event.fix(evt.event).stopPropagation();return false;},'option':function(evt){var elm=evt.target,orivalue,selected,rtChange,rtClick;selected=elm.getAttribute('value');orivalue=_m.value;_m.setValue(selected);if(selected!=orivalue){rtChange=_m.onchange.call(_m,evt,selected);}
rtClick=_m.onclick.call(_m,evt,selected);if(rtChange===false||rtClick===false){_m.setValue(orivalue);}
_m.hideOptions();J.event.fix(evt.event).stopPropagation();return false;}});J(document.body).bind('click',(function(_m){return function(){_m.hideOptions.call(_m);};})(this));opts.onchange&&(this.onchange=opts.onchange);opts.onclick&&(this.onclick=opts.onclick);this.id=id;this.value=valueNode.value;this.options=options;this.node=node;this.valueNode=valueNode;this.selectNode=selectNode;this.optionsNode=optionsNode;this.setValue(valueNode.value);GDT.form.select._instance[id]=this;GDT.form.select._counter++;return this;};GDT.form.select._counter=0;GDT.form.select._instance={};GDT.form.select.prototype.setValue=function(value,name){typeof value==='undefined'&&(value='');this.value=value;this.valueNode.value=value;value===''&&(value='请选择');!name&&(name=this.options[value]||value);this.selectNode.innerHTML=name+'<b class="ui_trig ui_trig_b"></b>';J('li',this.optionsNode).removeClass('selected');J('a[value='+value+']',this.optionsNode).parent().addClass('selected');};GDT.form.select.prototype.show=function(){J(this.node).removeClass('none');};GDT.form.select.prototype.showOptions=function(){J(this.optionsNode).removeClass('none');};GDT.form.select.prototype.hide=function(){J(this.node).addClass('none');};GDT.form.select.prototype.hideOptions=function(){J(this.optionsNode).addClass('none');};GDT.form.select.prototype.onclick=function(){};GDT.form.select.prototype.onchange=function(){};GDT.form.placeholder=function(selector){var showHolder,hideHolder;showHolder=function(el,txt){var bounds,holderId,holder;holderId='holder'+el.id;holder=J('#'+holderId);if(holder.length>0){holder.show();}else{try{bounds=el.getBoundingClientRect();}catch(e){bounds={top:el.offsetTop,left:el.offsetLeft}};J('<div id="'+holderId+'" data-id="'+el.id+'" style="color:#aca899;position:absolute;'+
['left:'+5+'px','top:'+5+'px','width:'+(bounds.width||200)+'px','height:'+(bounds.height||24)+'px'].join(';')
+'">'+txt+'</div>').appendTo(el.parentNode).bind('click',function(){J(this).hide();J('#'+this.getAttribute('data-id')).trigger('focus');});}};hideHolder=function(el){J('#holder'+el.id).hide();};J(selector).each(function(k,v){var placeholder=v.getAttribute('placeholder'),tagName=v.tagName,tagType=v.type||'',ele=J(v);if(tagType=='hidden'||tagType=='file'||v.disabled){return;};if((tagName=='INPUT'||tagName=='TEXTAREA')&&!!('placeholder'in document.createElement('input'))){return;}else if(J.trim(ele.val())===''){showHolder(ele.get(0),placeholder);}
ele.bind('focus',function(){hideHolder(this);}).bind('blur',function(){var val=J.trim(ele.val());if(val===''){setTimeout((function(el){return function(){showHolder(el,placeholder);};})(this),100);}});});};GDT.form.TextTypeTip=(function(){var olist={};function entryTextTips(o,divId,maxlength,callback,opts){var len=o.val().length,cont;opts=opts||{};if(len>maxlength){o.val(o.val().substr(0,maxlength));}
var div;if(typeof(divId)=="object"){div=divId;}else{div=J('#'+divId);}
if(div){cont=opts.tpl?opts.tpl:'<strong class="c_tx">{CURRENT_LENGTH}</strong>/{MAX_LENGTH}';cont=cont.replace(/{CURRENT_LENGTH}/g,o.val().length).replace(/{MAX_LENGTH}/g,maxlength);div.html(cont);}
if(callback){callback(o,divId,maxlength);}}
return{add:function(o,tipDiv,maxlength,callback,opts){var oid,typefun;o=typeof o==='string'?J('#'+o):J(o);oid=o.attr('id');if(olist[oid]){return;}
typefun=function(){entryTextTips(o,tipDiv,maxlength,callback,opts);};olist[oid]=typefun;o.bind('keyup',typefun);o.bind('keydown',typefun);o.bind('keypress',typefun);o.bind('focus',typefun);o.bind('propertychange',typefun);o.bind('change',typefun);typefun();},remove:function(o){o=typeof o==='string'?J('#'+o):J(o);var oid=o.attr('id');if(!olist[oid]){return;}
typefun=olist[oid];o.unbind('keyup',typefun);o.unbind('keydown',typefun);o.unbind('keypress',typefun);o.unbind('focus',typefun);o.unbind('propertychange',typefun);o.unbind('change',typefun);olist[oid]=null;delete olist[oid];},trigger:function(oid){olist[oid]();},triggerall:function(){each(olist,function(k,v){v();});},addList:function(list){each(list,function(k,v){var tipdiv=v[1]||J('#'+v[0]).getNext().elements[0];GDT.form.TextTypeTip.add(v[0],tipdiv,v[2]);});}};})();QBL.validator=new QBL.Mshell('validator');QBL.validator.getResource=function(){return[['js',GDT.files.getVersionFile("validator"),'utf-8']];};QBL.validator.mock('valFields',"onceValFinish","valField","clearFieldErr","showFieldErr","dependents","setVal","actionValField","emptyValidate","numValidate","priceValidate");GDT.validator=QBL.validator;GDT.timeutil={makeFullTimeStr:function(){return(new Array(336+1)).join('1');},timeArrToReadable:function(data){var hc=[],i;var label=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"];if(!data||!data.length){data=[];for(i=0,len=7;i<len;i++){data.push([]);}}
for(i=0;i<data.length;i++){var ht=[];var item=data[i];if(item.length>0){for(var j=0;j<item.length;j++){var range=item[j];var sh=parseInt(range.start,10);var eh=parseInt(range.end,10);ht.push('<span>'+sh+(range.start>sh?':30':':00')+'-'+eh+(range.end>eh?':30':':00')+'<\/span>');if(j<item.length-1){ht.push(', ');}}}
if(ht.length>0){hc.push(label[i]+':'+ht.join(''));}}
return hc;},timeStrToArr:function(str){str=str?str:'';var start=0,end=0,pos,i,len;var hlist=[];for(i=0,len=7;i<len;i++){hlist.push([]);}
var curpos=0;var hst=0;var f=function(start,end){start=((start-1)%48)/2;end=((end-1)%48+1)/2;var o={'start':start,'end':end};return o;};for(i=0,len=str.length;i<len;i++){var v=str.slice(i,i+1);if(v==1&&start==0){start=end=i+1;continue;}
if(v==1&&start!=0){end=i+1;}
if((v==0&&start!=0)||(i==(len-1)&&start!=0)||((i+1)%48==0&&start!=0)){pos=parseInt((start-1)/48,10);hlist[pos].push(f(start,end));start=0;end=0;continue;}}
if(start!=0){pos=parseInt((start-1)/48,10);hlist[pos].push(f(start,end));}
return hlist;},timeArrToBitStr:function(arr){arr=arr?arr:[];var num_start=0,i;var hlist={};for(i=0;i<arr.length;i++){var item=arr[i];if(item.length>0){for(var j=0;j<item.length;j++){var range=item[j];var sh=range.start;var eh=range.end;sh*=2;eh*=2;for(var k=sh;k<eh;k++){hlist[num_start+k+1]=1;}}}
num_start+=48;}
var str='';for(i=0;i<336;i++){var bit=(hlist[i+1])?'1':'0';str+=bit;}
str=str.replace(/0*$/,'');return str;},timeArrSelColumn:function(arr){var flag=true,t0;flag=flag&&(arr.length==7);if(flag){each(arr,function(k,v){v=v.substring(v.indexOf(':')+1);if(k==0){t0=v;flag=flag&&(!(/:30/).test(t0));}else{flag=flag&&(t0==v);}
return flag;});}
t0&&(t0.split(',').length>=2)&&(flag=false);if(flag){flag=t0.match(/\d+:\d+/g);}
return flag;},getTimeReadArr:function(timearr){var strarr=GDT.timeutil.timeArrToReadable(timearr),isColumn=false,r0;isColumn=GDT.timeutil.timeArrSelColumn(strarr);if(isColumn){r0=strarr[0];strarr=[r0.substring(r0.indexOf(':')+1)];}
return strarr;}};(function(){try{QZFL.widget.calendar.cssLoaded=true;}catch(e){}
GDT.external={showMsgbox:QZFL.widget.msgbox.show,hideMsgbox:QZFL.widget.msgbox.hide,Confirm:QZFL.widget.Confirm};window.mDomain=parent.mDomain;QZFL.config.gbEncoderPath="http://qzs.qq.com/qzone/v5/toolpages/";QZFL.config.FSHelperPage="http://qzs.qq.com/qzone/v5/toolpages/fp_gbk.html";QZFL.config.defaultShareObject="http://qzs.qq.com/qzone/v5/toolpages/getset.swf";QZFL.config.staticServer="http://qzs.qq.com/ac/qzone/qzfl/lc/";QZFL.config.DCCookieDomain=mDomain;QZFL.widget.msgbox.cssPath="http://qzonestyle.gtimg.cn/ac/qzfl/release/css/msgbox.css";})();(function(){var _time=(new Date).getTime(),_nodeCache={},_crid;GDT.util={adjustSize:function(obj,w,h){obj.onload=null;if(w<=0||h<=0)return;GDT.util.scaleImage(obj,w,h);},_imglist:[],scaleImage:function(mid,width,height){var m=J(mid).get(0);if(!m||m.src=='javascript:;'){GDT.log('warn: scaleImage: element not found');return false;}
var _c=GDT.util._imglist,offset=_c.length;_c[offset]=new Image();_c[offset].onload=(function(list,offset,mobj,w,h){return function(){var tempimg=list[offset];tempimg.onload=null;var s1=GDT.util.scaleSize([tempimg.width,tempimg.height],[w,h]);mobj.style.width=s1[0]+'px';mobj.style.height=s1[1]+'px';list[offset]=null;delete list[offset];};})(_c,offset,m,width,height);_c[offset].src=m.src;},scaleSize:function(s0,s){var w0=s0[0],h0=s0[1],w=s[0],h=s[1],rw,rh;if((w0/h0)>(w/h)){if(w0>w){rw=w;rh=w*(h0/w0);}else{rw=w0;rh=h0;}}else{if(h0>h){rh=h;rw=h*(w0/h0);}else{rw=w0;rh=h0;}}
return[rw,rh];},fixImgSize:function(obj,w,h,openWindows){obj.onload=null;if(w<=0||h<=0)return;var img=new Image();img.src=obj.src;var w0=img.width,h0=img.height,r=false;if((w0/h0)>(w/h)){obj.style.width=w+"px";obj.style.height=w*(h0/w0)+"px";r=true;}else{obj.style.height=h+"px";obj.style.width=h*(w0/h0)+"px";r=true;}
if(openWindows&&r){obj.style.cursor="pointer";obj.title="点击预览原图";obj.onclick=function(){window.open(obj.src);};}},calposion:function(cal,sel){J($(sel)).unbind('click');J($(sel)).on('click',function(evt){a.setCalendarPos($(sel),cal,evt);});J($(sel)).on('keydown',function(evt){var keycode=evt.which;if(keycode==QZFL.event.KEYS.DELETE||keycode==QZFL.event.KEYS.BACKSPACE){$(sel).value='';cal.hide();}
evt.preventDefault();});},setCalendarPos:function(target,cal,evt){var calendar=cal;target=J(target);var p=target.position();var c=calendar._self;c.style.left=p.left+"px";c.style.top=(p.top+target.height()+10)+"px";c.style.zIndex=10;},hashManage:(function(){var _urlNoHash=getUrlNoHash(),_params=getHashParams();function setHash(key,val){_params[key]=val;_updateHash();}
function getHash(key){_params=getHashParams();var rt=_params;if(key){rt=_params[key]||'';}
return rt;}
function delHash(key){_params[key]=null;_updateHash();}
function _updateHash(){var part=[];for(var x in _params){if(!x||_params[x]===null){continue;}
part.push(x+'='+_params[x]);}
location.href=_urlNoHash+'#'+part.join('&');}
function getUrlNoHash(url){var href=url||location.href,pos=href.indexOf('#');return href.substring(0,pos>=0?pos:href.length);}
function getHashParams(){var params={},hash=location.hash.substring(1).split('&'),x,t;for(x in hash){t=hash[x].split('=');if(t.length){params[t[0]]=t.slice(1).join('=');}}
return params;}
function onhashchange(callback,key){var hl={};var type=Object.prototype.toString.call(key).slice(8,-1).toLowerCase();var arr=(type=='array')?key:[key];for(var i=0,len=arr.length;i<len;i++){var n=arr[i];hl[n]=getHash(n);}
var check=function(){var f=false;for(var n in hl){var mod=hl[n];var curmod=getHash(n);if(curmod!=mod){hl[n]=curmod;f=true;}}
if(f){callback();}};if(('onhashchange'in window)&&(!document.documentMode||document.documentMode>7)){window.onhashchange=check;}else{setInterval(check,100);}}
return{setHash:setHash,getHash:getHash,delHash:delHash,onhashchange:onhashchange};})(),FuncQueue:(function(){function FuncQueue(){this.queue=[];this.cbbuff={};this.curNum=0;this.callnum=0;this.cn=0;}
FuncQueue.prototype.add=function(func,callback){var args=Array.prototype.slice.call(arguments);this.queue.push(args);};FuncQueue.prototype._execCallback=function(n,o,cb){var that=this;that.cbbuff[n]=[o,cb];if(n==that.curNum){while(that.curNum<that.callnum){if(that.cbbuff[that.curNum]){var c=that.cbbuff[that.curNum];c[1].apply(null,c[0]);delete that.cbbuff[that.curNum];that.curNum++;}else{break;}}}};FuncQueue.prototype.exec=function(){var that=this;that.callnum+=that.queue.length;while(that.queue.length>0){var c=that.queue.shift();if(!c[1]){var cb=function(){};c[0]();that._execCallback(that.cn,[],cb);}else{var f=(function(n,cb){return function(o){var args=Array.prototype.slice.call(arguments);that._execCallback(n,args,cb);};})(that.cn,c[1]);c[0](f);}
that.cn++;}};return FuncQueue;})(),setNameFieldValue:function(fields,v){var val,key;each(fields,function(k,f){if(J.isArray(f)){var val=(typeof f[1]=='undefined')?f[0]:f[1];key=f[0];}else{val=key=f;}
var type=J('[name='+key+']').attr('type');if(type=='radio'){J('[name='+key+']').each(function(k,el){el.checked=(v[val]+''==el.value);});}else{var value=v[val];setMultiCheck(J('[name='+key+']'),value);}});},setMultiCheck:function(list,val){var val=parseInt(val,10);list.each(function(k,v){var cur=parseInt(J(v).val(),10);v.checked=(!!(cur&val));});},clearSelect:function(id){var sObj=$(id);if((sObj==undefined)||(sObj.tagName.toUpperCase()!="SELECT")){return false;}
for(var i=sObj.options.length;i>=0;i--){sObj.options[i]=null;}
return true;},addSelectItem:function(item,txt,val,selected,opts){var sObj,_g;opts=opts||{};_g=GDT.util.getDomGetter(opts.cnt);sObj=(J.type(item)=='string')?J('#'+item)[0]:J(item)[0];if((sObj==undefined)||(sObj.tagName.toUpperCase()!="SELECT")){return false;}
selected=selected||false;var opt=new Option(txt,val,false,false);sObj.options[sObj.options.length]=opt;opt.selected=selected;return true;},mapToArrList:function(map){var arr=[];for(var n in map){var r={'id':n,'name':map[n]};arr.push(r);}
return arr;},initMapSelect:function(field,map,sel,opts){var arr=GDT.util.mapToArrList(map);opts=opts||{};if(!opts.noempty){arr.unshift({'id':'','name':'请选择'});}
GDT.util.initselect(field,arr,'id','name',sel,opts);},initselect:function(id,list,val,label,sel,opts){opts=opts||{};if(J.type(list)=='array'){each(list,function(k,v){var seled=(typeof(sel)!='undefined'&&(v[val]==sel))?true:false;GDT.util.addSelectItem(id,v[label],v[val],seled,opts);});}else{each(list,function(k,v){var seled=(sel&&(v==sel))?true:false;GDT.util.addSelectItem(id,v,k,seled,opts);});}},getParameter:function(name,cancelBubble){var r=new RegExp("(\\?|#|&)"+name+"=([^&#]*)(&|#|$)");var m=location.href.match(r);if((!m||m=="")&&!cancelBubble)m=top.location.href.match(r);return(!m?"":m[2]);},setRadioAsso:function(name,display_values,asso_block,callback){var clickfun=function(e){var obj=e.target;var check=(obj.checked==true);var v=obj.value;var ret=false;if(check&&(J.inArray(v,display_values)>=0)){if(asso_block){$(asso_block).style.display='';}
ret=true;}else{if(asso_block){$(asso_block).style.display='none';}}
if(callback){callback(ret);}};var objs=document.getElementsByName(name);for(var i=0,len=objs.length;i<len;i++){var obj=objs[i];J(obj).on('click',clickfun);}},radioSeachClick:function(name){var objs=document.getElementsByName(name);for(var i=0,len=objs.length;i<len;i++){var obj=objs[i];if(obj.checked){obj.click();}}},selectAsso:(function(){function selectAsso(id,hidevalues,asso,callback){var f=function(){var v=J('#'+id).elements[0].value;var ret=(J.inArray(v,hidevalues)>=0);if(asso){if(ret){J('#'+asso).hide();}else{J('#'+asso).show();}}
if(callback){callback(!ret);}};selectAsso.flist[id]=selectAsso.flist[id]||[];selectAsso.flist[id].push(f);J('#'+id).bind('change',f);}
selectAsso.flist={};selectAsso.fireAsso=function(id){var l=selectAsso.flist[id];if(l){each(l,function(k,v){v();});}};return selectAsso;})(),goPage:function(curPage,enterPage,totalPage,linkFormat){var re=new RegExp("^\\s*[1-9]\\d*\\s*$");if(!re.test(enterPage)){alert("输入页码必须为正整数");return false;}
enterPage=parseInt(enterPage,10);if(enterPage>totalPage||enterPage<=0){alert("输入页码范围不正确");return false;}
if(curPage==enterPage){return false;}
var reg=new RegExp("{no}","g");linkFormat=linkFormat.replace(reg,enterPage);if(linkFormat.indexOf("javascript")!=-1){var sFun=linkFormat.split(":");if(sFun.length>0)
eval(sFun[1]);return;}else{location.href=linkFormat;return;}},showPageList:function(curPage,totalPage,pagesPerList,linkFormat,styleObj,delimiter){var curPage=Number(curPage);var config={};(typeof delimiter==='object')&&(config=delimiter,delimiter='');if(curPage<1||totalPage<=1||curPage>totalPage)
return"";if(!styleObj){styleObj={};styleObj.textClass='pg_having';styleObj.preClass='';styleObj.nextClass='';styleObj.curPageClass='hit';styleObj.otherPageClass='';styleObj.jumpClass='page_form';styleObj.inputClass='text-input';styleObj.pageClass='page_page';styleObj.submitClass='bt_submit';}
if(!delimiter)delimiter=" ";var m=[];var prePageNo=curPage>1?curPage-1:1;var nextPageNo=curPage<totalPage?curPage+1:totalPage;var reg=new RegExp("{no}","g");var url;var i;if(config.changePagesize){url=linkFormat.replace(reg,1).replace('javascript:','');var sizemap={20:'20条',50:'50条',100:'100条'},sizestr=[];each(sizemap,function(k,v){sizestr.push('<option value="'+k+'"'+(pagesPerList==k?' selected="selected"':'')+'>'+v+'</option>');});m.push('<p class="pagenav_show_num">每页显示：<select onchange="'+url.replace('{pagesize}','this.value')+'">'+sizestr.join('')+'</select></p> ');linkFormat=linkFormat.replace(',{pagesize}','');}
if(!config.arrow){m[m.length]='<p class="mod_pagenav_main">';}
if(styleObj!==true){if(1==curPage){m[m.length]='<span class="mod_pagenav_disable"><span>上一页</span></span>';}else{url=linkFormat.replace(reg,prePageNo);m[m.length]='<a href="'+url+'" title="上一页" class="c_tx"><span>上一页</span></a>';}
m[m.length]='<span class="mod_pagenav_count">';wetc_start=false;wetc_end=false;w_first=false;w_end=false;if(totalPage<=pagesPerList){startPageNo=1;endPageNo=totalPage;}else{var intnum=parseInt((pagesPerList-2)/2,10);startPageNo=curPage-intnum;endPageNo=curPage+intnum;if(startPageNo>=3){wetc_start=true;}
if(startPageNo>=2){w_first=true;}
if(endPageNo<totalPage){w_end=true;}
if(endPageNo+1<totalPage){wetc_end=true;}
if(startPageNo<=1){startPageNo=1;endPageNo=pagesPerList-1;}
if(endPageNo>=totalPage){startPageNo=totalPage-pagesPerList+2;endPageNo=totalPage;}}
if(w_first){url=linkFormat.replace(reg,1);if(1==curPage){m[m.length]='<span class="current"><span>'+1+'</span></span>';}else{m[m.length]='<a  title="'+i+'" href="'+url+'" class="c_tx"><span>'+1+'</span></a>';}}
if(wetc_start){m[m.length]='<span class="mod_pagenav_more"><span>…</span></span>';}
for(i=startPageNo;i<=endPageNo;i++){url=linkFormat.replace(reg,i);if(i==curPage){m[m.length]='<span class="current"><span>'+i+'</span></span>';}else{m[m.length]='<a  title="'+i+'" href="'+url+'" class="c_tx"><span>'+i+'</span></a>';}}
if(wetc_end){m[m.length]='<span class="mod_pagenav_more"><span>...</span></span>';}
if(w_end){if(endPageNo!=totalPage){i=totalPage;url=linkFormat.replace(reg,i);if(i==curPage){m[m.length]='<span class="current"><span>'+i+'</span></span>';}else{m[m.length]='<a  title="'+i+'" href="'+url+'" class="c_tx"><span>'+i+'</span></a>';}}}
m[m.length]='</span>';var secondCountClass=(config&&config.hideSecondCount)?'mod_pagenav_count2 none':'mod_pagenav_count2';m[m.length]='<span class="'+secondCountClass+'"> <span class="current">'+curPage+'</span>/'+totalPage+' </span>';if(totalPage==curPage){m[m.length]='<span class="mod_pagenav_disable"><span>下一页</span></span>';}else{url=linkFormat.replace(reg,nextPageNo);m[m.length]='<a href="'+url+'" title="下一页" class="c_tx"><span>下一页</span></a>';}
var linkstr=linkFormat.replace(/'|"/g,"\\'");m[m.length]='</p>';var jumpClass=(config&&config.hideJump)?'mod_pagenav_option none':'mod_pagenav_option';m[m.length]='<p class="'+jumpClass+'">';m[m.length]='<span class="mod_pagenav_turn">到<input type="text" class="textinput"  onkeyup="if(event.keyCode==13) goPage('+curPage+',this.value, '+totalPage+',\''+linkstr+'\');" />页 <button  onclick="goPage('+curPage+',this.parentNode.getElementsByTagName(\'input\')[0].value, '+totalPage+',\''+linkstr+'\');" type="button" class="bt_tx2"><span>确定</span></button></span>';m[m.length]='</p>';}else{if(!config.arrow){if(1==curPage){m[m.length]='<span class="mod_pagenav_disable"><span>上一页</span></span>';}else{m[m.length]='<a href="'+linkFormat.replace(reg,-1)+'" title="上一页" class="c_tx"><span>上一页</span></a>';}
if(config.pageNav){m[m.length]='<span class="mod_pagenav_count">'+curPage+'/'+totalPage+'</span>';}
if(totalPage==curPage){m[m.length]='<span class="mod_pagenav_disable"><span>下一页</span></span>';}else{m[m.length]='<a href="'+linkFormat.replace(reg,1)+'" title="下一页" class="c_tx"><span>下一页</span></a>';}}else{m[m.length]='<div class="mod-page-s"><div class="mod-page-inner">';if(1==curPage){m[m.length]='<a href="javascript:;" class="before btn-before-disable"></a>';}else{m[m.length]='<a href="'+linkFormat.replace(reg,-1)+'" class="before"></a>';}
if(config.pageNav){m[m.length]='<span class="num"><span class="now">'+curPage+'</span>/'+totalPage+'</span>';}
if(totalPage==curPage){m[m.length]='<a href="javascript:;" class="after btn-after-disable"></a> <span></span>';}else{m[m.length]='<a href="'+linkFormat.replace(reg,1)+'" class="after"></a>';}
m[m.length]='</div></div>';}}
return m.join("");},getCheckgroupValue:function(cont,type){var d=0;type=type||'checkbox';var id=(cont.substring(0,1)=='#')?cont:'#'+cont;J(id+' input:checked[type='+type+']').each(function(k,v){d+=parseInt(v.value,10);});return d;},setFrameHeight:function(){setTimeout(function(){var w=document.body.offsetWidth||document.documentElement.offsetWidth;var h=document.body.offsetHeight||document.documentElement.offsetHeight;QZFL.FP.resizePopupDialog(w,h);},300);},inputFocus:function(ctrl,pos){if(ctrl.setSelectionRange)
{ctrl.focus();ctrl.setSelectionRange(pos,pos);}
else if(ctrl.createTextRange){var range=ctrl.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}},docClickEvent:function(dlg,func){var clickEvt=function(evt){var target=evt.target;if(target!=$(dlg.id)&&!(J.contains($(dlg.id),target))&&!(func&&func(evt))){dlg.unload();J(document).off('click',clickEvt);}};setTimeout(function(){J(document).on('click',clickEvt);},100);},_dockeyup:null,docKeyupEvent:function(callback){var util=GDT.util;if(util._dockeyup){util._dockeyup=callback;return;}
util._dockeyup=callback;J(document).on('keyup',function(evt){if(evt.which==13){util._dockeyup();}});},inherit:function(parentCtor,childCtor){var f=function(){var args=Array.prototype.slice.call(arguments);this._super=parentCtor;childCtor.apply(this,args);};J.extend(f.prototype,parentCtor.prototype);return f;},getTime:function(){return _time||(new Date()).getTime();},setTime:function(time){_time=time;},showMsgbox:function(){var args=Array.prototype.slice.call(arguments);if(args.length<3||!args[2]){args.length<2&&(args[1]=1);args[2]=2000;}
GDT.external.showMsgbox.apply(null,args);},hideMsgbox:GDT.external.hideMsgbox,showBubble:function(el,content,opts){var timer=null,config;timer=setTimeout(bubble,100);J(el).bind('mouseout',function(){clearTimeout(timer);});var pageHeight=J(document).scrollHeight;var eleTop=J(el).position().top;var isUpSide=(eleTop/pageHeight>0.5);var testEle=document.createElement('div');testEle.style.cssText='position:absolute;padding:6px;bottom:7px;width:188px;'+'left:-5000px;line-height:20px;text-align: left;visibility:hidden;';var $tEle=J(testEle);$tEle.appendTo(J('body'));$tEle.html(content);var height=$tEle.height();height=height||100;$tEle.remove();config={id:null,x:-15,y:isUpSide?-10:10,timeout:5000,height:height,width:200,arrowEdge:isUpSide?3:1,arrowPoint:isUpSide?4:1,arrowType:2,noCloseButton:true,onLoad:null};J.extend(config,opts);J.ua.ie&&(config.noShadow=true);function bubble(){var id;QZFL.widget.bubble.useTween=false;id=QZFL.widget.bubble.show(el,'',content,config);!config.onLoad&&(config.onLoad=function(id){J(el).bind('mouseout',function(){QZFL.widget.bubble.hide(id);});});config.onLoad(id);config=null;}},parseUrl:function(url){var len=url.length,posSearch=url.indexOf('?'),posHash=url.indexOf('#'),search='',hash='',result={};posSearch<0&&(posSearch=len);posHash<0&&(posHash=len);posSearch<len&&(search=url.substring(posSearch+1,posHash));posHash<len&&(hash=url.substring(posHash+1));if(search){result.search={};each(search.split('&'),function(k,v){var _t=v.split('=');result.search[_t[0]]=_t[1];});}
if(hash){result.hash={};each(hash.split('&'),function(k,v){var _t=v.split('=');result.hash[_t[0]]=_t[1];});}
return result;},setCalender:function(el,fn){var c=QZFL.widget.calendar.bind(el,0),showcfg={yearPattern:'-',monthPattern:'-',datePattern:'',connectString:''};J.extend(c,showcfg);if(typeof fn==='function'){var _orig_onDateSelected=c.onDateSelected;c.onDateSelected=function(d){_orig_onDateSelected(d);fn.apply(c,[d]);};}
return c;},bindCalender:function(opts){var sdateEl,edateEl,sdate,edate,fsval,feval,sdatePicker,edatePicker,cfg;cfg={sdateId:'sdate',edateId:'edate',sdate:'',edate:'',glue:'-',onDateSelected:function(){}};J.extend(cfg,opts);sdateEl=$(cfg.sdateId);edateEl=$(cfg.edateId);if(sdateEl){sdate=sdateEl.value;sdatePicker=GDT.util.setCalender(sdateEl,cfg.onDateSelected);if(cfg.sdate){sdatePicker.setDate(new Date(cfg.sdate));!sdate&&(sdateEl.value=J.timeFormatString(cfg.sdate,'{Y}-{M}-{d}'));}else if(sdate){fsval=sdate.split(cfg.glue);sdatePicker.setDate(new Date(Date.UTC(fsval[0],fsval[1]-1,fsval[2],0,0,0)));}}
if(edateEl){edate=edateEl.value;edatePicker=GDT.util.setCalender(edateEl,cfg.onDateSelected);if(cfg.edate){edatePicker.setDate(new Date(cfg.edate));!edate&&(edateEl.value=J.timeFormatString(cfg.edate,'{Y}-{M}-{d}'));}else if(edate){feval=edate.split(cfg.glue);edatePicker.setDate(new Date(Date.UTC(feval[0],feval[1]-1,feval[2],0,0,0)));}}
return{sdatePicker:sdatePicker,edatePicker:edatePicker};},getDomGetter:function(cnt){var getter;getter=(cnt)?function(el){return J(el,cnt);}:J;return getter;},getFormData:function(elsOrFormid,opts){var data={},formEls,parentEl=document;opts=opts||{};if(elsOrFormid.nodeType&&elsOrFormid.nodeType==1){parentEl=elsOrFormid;}else if(typeof elsOrFormid==='string'){parentEl=$(elsOrFormid);}else if((J.type(elsOrFormid)==='object')&&J.isArray(elsOrFormid.elements)){formEls=elsOrFormid;}
formEls=formEls||J('input, textarea, select',parentEl);formEls.each(function(k,v){var ischk=v.type=='checkbox'?1:0,isrdo=v.type=='radio'?1:0,isfile=v.type=='file'?1:0,isarr=false,key=v.name||v.id||'',val=J.trim(v.value);if(v.disabled&&!opts.includeDisabled)return;if(key.substr(key.length-2,2)==='[]'){key=key.slice(0,-2);isarr=true;}
if(isfile){if(val){data._file=data._file||[];data._file.push(v.id);}}else{if(ischk||isrdo){val=='on'&&(val=1);}
if(isarr){data[key]=data[key]||[];if(!(isrdo||ischk)||v.checked){data[key].push(val);}}else{if(!(isrdo||ischk)||v.checked){data[key]=val;}}}});return data;},replaceNode:function(node,rhtml){var wrap,rid;if(node.nodeType!==1){return false;}
node.style.display='none';do{rid=Math.ceil(Math.random()*100);}while(typeof _nodeCache[rid]!=='undefined');wrap=document.createElement('span');wrap.id='_GDT_REPLACE_NODE_'+rid;wrap.className='fn_editbox';wrap.innerHTML=rhtml;node.parentNode.insertBefore(wrap,node);_nodeCache[rid]=node;_crid=rid;return rid;},restoreNode:function(rid){typeof rid==='undefined'&&(rid=_crid);J('#_GDT_REPLACE_NODE_'+rid).remove();_nodeCache[rid].style.display='';delete _nodeCache[rid];_nodeCache[rid]=null;},pager:function(pageWrap,pageConfig,fnName){var config={page:1,totalpage:1,pagesize:10,changePagesize:false,simpleStyle:false,hideSecondCount:false,hideJump:false,useOnclick:false},styleObj=null;J.extend(config,pageConfig);config.simpleStyle&&(styleObj=true);typeof pageWrap==='string'&&(pageWrap=$(pageWrap));if(pageWrap){var hrefAndOnchange;if(config.useOnclick){hrefAndOnchange='javascript:;" onclick="'+fnName+(config.changePagesize?'({no},{pagesize});':'({no});')+'return false;';}else{hrefAndOnchange='javascript:'+fnName+(config.changePagesize?'({no},{pagesize})':'({no})');}
if(typeof fnName==='string'&&config.totalpage>1){pageWrap.innerHTML=GDT.util.showPageList(config.page,config.totalpage,config.pagesize,hrefAndOnchange,styleObj,{changePagesize:config.changePagesize,pageNav:config.pageNav,arrow:config.arrow,hideSecondCount:config.hideSecondCount,hideJump:config.hideJump},8);pageWrap.style.display='';}else{pageWrap.innerHTML='';pageWrap.style.display='none';}}},timeFilter:function(sdate,edate,rules){var ndate=J.timeFormatString(GDT.util.getTime(),'{Y}-{M}-{d}');rules=rules||{};GDT.log('time filter',sdate,edate,rules);if(rules.both&&(!sdate||!edate)){GDT.util.showMsgbox('请选择完整的查询时间段',5);return false;}
if(sdate&&edate&&sdate>edate){GDT.util.showMsgbox('查询的开始时间必须早于结束时间',5);return false;}
if(rules.futureEnable){}else if(rules.todayInclude&&(sdate>ndate||edate>ndate)){GDT.util.showMsgbox('只能查询今天及今天之前的数据',5);return false;}else if(!rules.todayInclude&&(sdate>=ndate||edate>=ndate)){GDT.util.showMsgbox('只能查询今天之前的数据',5);return false;}
if(rules.include2Year){if(sdate<J.timeFormatString(GDT.util.getTime()-63072000000,'{Y}-{M}-{d}')){GDT.util.showMsgbox('抱歉，只提供最近两年内的数据',5);return false;}}else{if(!rules.rangeWithin90days){if(sdate<J.timeFormatString(GDT.util.getTime()-7689600000,'{Y}-{M}-{d}')){GDT.util.showMsgbox('抱歉，只提供最近90天的数据',5);return false;}}else{if(Math.abs(new Date(edate.replace(/-/g,'/'))-new Date(sdate.replace(/-/g,'/')))>7689600000){GDT.util.showMsgbox('抱歉，一次查询时间段最长为90天',5);return false;}}}
return true;},timeFilterWithAutocorrect:function(rule,sdate,edate){function hasit(a,b){var re=new RegExp('\W?'+b+'\W?');return re.test(a)}
var ndate=J.timeFormatString(GDT.util.getTime(),'{Y}-{M}-{d}');var startLimits={'rangeWithin90days':J.timeFormatString(GDT.util.getTime()-7689600000,'{Y}-{M}-{d}')};var startLimit=null;J.each(startLimits,function(word,timel){if(hasit(rule,word)){startLimit=timel;}});var endLimit=ndate;if(!hasit(rule,'includeToday')){endLimit=J.timeFormatString(GDT.util.getTime()-60*60*24*1000,'{Y}-{M}-{d}');}
GDT.log('hasit',hasit(rule,'includeToday'),endLimit,edate);var hasBeenCorrected=false;if(sdate>edate){hasBeenCorrected=true;sdate=edate;}
if(sdate<startLimit){hasBeenCorrected=true;sdate=startLimit;}
if(edate<startLimit){hasBeenCorrected=true;edate=startLimit;}
if(sdate>endLimit){hasBeenCorrected=true;sdate=endLimit;}
if(edate>endLimit){hasBeenCorrected=true;edate=endLimit;}
return{hasBeenCorrected:hasBeenCorrected,sdate:sdate,edate:edate}},trimcut:function(str,count){count=count||8;var len=J.getRealLen(str);if(len>count){str=J.cut(str,count-2,'...');}
return str;},getAppUrl:function(appid,data){var urlMap,format;urlMap={qzone:'http://rc.qzone.qq.com/myhome/{APPID}',pengyou:'http://www.pengyou.com/index.php?mod=appmanager&act=openapp&type=qzone&appid={APPID}',im:'javascript:void(0);'};format=urlMap[{1:'qzone',8:'pengyou',9:'im'}[data.siteset]];format=(format)?format:urlMap.qzone;var orderlink=format.replace(/{APPID}/g,appid);return orderlink;},isBqq:function(qqNum){if(!qqNum){return false;}
var range=[[1153990000,1153999999],[1495000000,1496999999]];qqNum=parseInt(qqNum,10);if(isNaN(qqNum)){return false;}
var rangeLength=range.length;for(var i=0;i<rangeLength;i++){if(qqNum>=range[i][0]&&qqNum<=range[i][1]){return true;}}
return false;}};})();GDT.util.getUrlParam=(function(){var _params=(GDT.util.parseUrl(location.href)).search||{};return function(key){return typeof key!=='undefined'?_params[key]:_params;};})();GDT.util.Confirm=GDT.external.Confirm;GDT.util.mouseColor=function(el,hl){var mouseover=function(evt){J(el).addClass(hl);};var mouseout=function(evt){J(el).removeClass(hl);};J(el).on('mouseover',mouseover);J(el).on('mouseout',mouseout);};GDT.util.clearMouseColor=function(el){J(el).unbind('mouseover');J(el).unbind('mouseout');return false;};GDT.fn={wrap:function(func,newFn,type){type=type||'after';return function(){var args=Array.prototype.slice.call(arguments);if(type=='before'){newFn.apply(null,args);}
if(type!='around'){func.apply(null,args);}else{newFn.apply(null,args);}
if(type=='after'){newFn.apply(null,args);}};}};(function(){var cache={};GDT.util.tmpl=function tmpl(str,data){var fn=!(/\W/).test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn;};})();GDT.localStorage=(function(){var store=null,engine=null,searchOrder,engines;function parseJSON(data){if(typeof data!=="string"||!data){return null;}
var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rbrace=/^(?:\{.*\}|\[.*\])$/;if(rbrace.test(data)){data=J.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}}else{return data;}}
searchOrder=['localStorage','userData'];engines={localStorage:{test:function(){return window.localStorage?true:false;},init:function(){store=localStorage;},getItem:function(key){return parseJSON(store.getItem(key));},setItem:function(key,value){typeof value==='object'&&(value=QZFL.lang.obj2str(value));return store.setItem(key,value);},removeItem:function(key){return store.removeItem(key);}},userData:{test:function(){return window.ActiveXObject?true:false;},init:function(){store=document.documentElement;store.addBehavior('#default#userdata');},getItem:function(key){store.load(key);return parseJSON(store.getAttribute(key));},setItem:function(key,value){typeof value==='object'&&(value=QZFL.lang.obj2str(value));store.load(key);store.setAttribute(key,value);return store.save(key);},removeItem:function(key){store.load(key);store.expires=new Date(315532799000).toUTCString();return store.save(key);}}};for(var i=0,l=searchOrder.length;i<l;i++){engine=engines[searchOrder[i]];if(engine.test()){try{engine.init();break;}catch(ex){engine=null;}}}
if(engine){delete engine.test;delete engine.init;}
return engine;})();GDT.dataBank=(function(){var _datapool={},_config={_expire:300000},_isExpired,_read,_write;_isExpired=function(data){return data._expire>0&&((new Date).getTime()-data._time>data._expire)?true:false;};_read=function(key,media){if(media==='memory'){return _datapool[key]||GDT.localStorage.getItem(key);}else{return GDT.localStorage.getItem(key);}};_write=function(key,data,media){return media==='memory'?(_datapool[key]=data):GDT.localStorage.setItem(key,data);};_clear=function(key,media){if(media==='memory'){_datapool[key]=null;delete _datapool[key];}else{GDT.localStorage.removeItem(key);}};return{get:function(key,media){var sdata=_read(key,media);if(sdata){if(!_isExpired(sdata)){return sdata.data;}else{_clear(key);}}else{return false;}},set:function(key,data,cfg){var sdata;typeof cfg==='undefined'&&(cfg={});cfg.media!=='memory'&&(cfg.media='local');sdata={data:data,_time:(new Date).getTime(),_expire:cfg.expire||_config._expire};return _write(key,sdata,cfg.media);}};})();GDT.seed={_prefix:'GDTSEED-',set:function(k,v){if(!k){return 0;}
k=GDT.seed._prefix+k;typeof v==='undefined'&&(v=Math.random());return GDT.dataBank.set(k,v,{media:'local',expire:600000});},get:function(k){var v,_t;if(!k){return 0;}
_t=GDT.seed._prefix+k;v=GDT.dataBank.get(_t,'local');if(!v){v=Math.random();GDT.seed.set(k,v);}
return v;}};(function(){function _getACSRFToken(){return QBL.genHash(QZFL.cookie.get('skey'));}
GDT.getACSRFToken=_getACSRFToken;GDT.poster=GDT.sender=function(){var args=Array.prototype.slice.call(arguments);args.length<2&&(args[1]={});args.length<3&&(args[2]=function(){});args.length<4&&(args[3]={});(!args[3])&&(args[3]={});!args[3].onError&&args[3].errcbFn&&(args[3].onError=args[3].errcbFn);args[3].charset='utf-8';return QBL.poster.apply(null,args);};GDT.getter=function(){var args=Array.prototype.slice.call(arguments),params;args.length<2&&(args[2]={});args.length<3&&(args[2]=function(){});args.length<4&&(args[3]={});(!args[3])&&(args[3]={});!args[3].onError&&args[3].errcbFn&&(args[3].onError=args[3].errcbFn);args[3].charset='utf-8';params=args[1];if(params&&params.format&&params.format==='xls'){var url=args[0];var urlParts=(GDT.util.parseUrl(url)).search||{};J.extend(params,urlParts);args[1]=params;GDT.sender.apply(null,args);return false;}
return QBL.getter.apply(null,args);};GDT.speed=QBL.monitorPage;})();GDT.delegate=function(wrap,eventType,fnMap){if(!wrap){return;}!wrap.nodeType&&(wrap=$(wrap));if(!wrap||(wrap.nodeType!==1&&wrap.nodeType!==9)){return;}
J(wrap).on(eventType,function(evt){var tarEl,notDOMEvent,opt,cnt=0;notDOMEvent={'keypress':1,'keydown':1,'keyup':1};if(eventType in notDOMEvent){opt=evt.which;}else{tarEl=evt.target;do{opt=tarEl.getAttribute('opt');}while(!opt&&(cnt++)<2&&(tarEl=tarEl.parentNode));}
if(opt&&opt in fnMap){return fnMap[opt]({type:eventType,event:evt,target:tarEl});}});};var _getChartResource=function(){var url=GDT.files&&GDT.files.getVersionFile&&GDT.files.getVersionFile("charter");url=url||"http://"+siDomain+"/qzone/biz/gdt/comm/chart.js";return[['js',url,'utf-8']];};QBL.highchart=new QBL.Mshell('highchart');QBL.highchart.getResource=_getChartResource;QBL.highchart.mock("create");GDT.highchart=QBL.highchart;QBL.charter=new QBL.Mshell('charter');QBL.charter.getResource=_getChartResource;QBL.charter.mock("insertTo","loadJsonData");QBL.charter.dataAdapter=function(data,cfg){var fdata={chartConfig:{},elements:{}},chartConfig={},elements=[],i,len=data.length,item,xNodes=[],yNodes={};if(!cfg.xTitleField||!cfg.yValueField){return false;}
for(i=0;i<len;i++){item=data[i];xNodes.push({aid:i,title:item[cfg.xTitleField]});each(cfg.yValueField,function(field,name){typeof yNodes[field]==='undefined'&&(yNodes[field]=[]);yNodes[field].push({aid:i,value:item[field]});});}
chartConfig.axis='xAxis,yAxis';chartConfig.xAxis={gid:Math.ceil(len/QBL.chart._config.xAxisPointCapacity)||1,nodes:xNodes};chartConfig.yAxis={min:0,auto:1};(J.type(cfg.yAxis)==='object')&&J.extend(chartConfig.yAxis,cfg.yAxis);cfg.tips=typeof cfg.tips==='string'?cfg.tips:'{name}:{#nodeValue#}';each(cfg.yValueField,function(field,name){elements.push({cType:'line',title:name,info:cfg.tips.replace(/\{name\}/g,name),nodes:yNodes[field]});});chartConfig.legend={type:elements.length>1?'mark':'display_none'};fdata={chartConfig:chartConfig,elements:elements};return fdata;};GDT.chart=QBL.charter;GDT.formater={convert:function(val,type){switch(type){case'int':return parseInt(val);case'float':return parseFloat(val);case'date':return new Date(Date.parse(val));default:return val.toString();}},percent:function(num,precision){typeof precision==='undefined'&&(precision=2);return isNaN(num)?'-':(Math.round(num*Math.pow(10,precision+3))/Math.pow(10,precision+1)).toFixed(precision)+'%';},divide:function(a,b,precision){var zoom;if(typeof a==='undefined'||typeof b==='undefined'){return'-';}
a=a.toString().replace(/,/g,'');b=b.toString().replace(/,/g,'');if(isNaN(a)||isNaN(b)){return'-';}
isNaN(precision)&&(precision=2);zoom=Math.pow(10,precision);return b!=0?(Math.round(a*zoom/b)/zoom).toFixed(precision):'-';},scientific:function(num,precision){var rt=[],part,n,decimal,len;typeof precision==='undefined'&&(precision=2);if(typeof num==='undefined'){return'-';}
part=((num.toFixed&&num.toFixed(precision))||num).toString().split('.');n=part[0];decimal=part[1];len=n.length;do{len-=3;rt.push(n.substring(len<0?0:len,len+3));}while(len>0);return isNaN(num)?'-':rt.reverse().join(',')+(decimal?'.'+decimal:'');},timerange:function(time){return time&&time.substr(2,1)===':'?time+' - '+time.replace(':00',':59'):time;},cent2dollar:function(num,scientific){if(isNaN(num)){return'-';}'undefined'===typeof scientific&&(scientific=true);num=(num|0)/100;return scientific?this.scientific(num,2):num.toFixed(2);}};GDT.formater.financial=GDT.formater.scientific;GDT.calendar={};(function(){var _pools={},gc=GDT.calendar;gc.init=function(opts){var datepicker;datepicker=GDT.util.bindCalender(opts);each(datepicker,function(dk,dp){_pools[dp._target.id]=dp;});return datepicker;};gc.setDate=function(elId,date){var datepart,dateObj=date;if(typeof date!=='object'){if(isNaN(date)){datepart=date.match(/(\d+)[^\d]*(\d+)[^\d]*(\d+)[^\d]*/);dateObj=new Date(Date.UTC(datepart[1],datepart[2]-1,datepart[3],0,0,0));}else{dateObj=new Date(date);}}
if(elId in _pools){_pools[elId].setDate(dateObj);J('#'+elId).val(J.timeFormatString(dateObj,'{Y}-{M}-{d}'));}};})();GDT.modifier={layer:function(el,htmlstr){var pos,wrap;if(el){el=J(el);pos=el.offset();wrap=document.createElement('div');wrap.innerHTML=htmlstr;wrap.style.position='absolute';wrap.style.left=pos.left+'px';wrap.style.top=(pos.top-(el.outerHeight())/2)+'px';document.body.appendChild(wrap);}
return wrap;},slab:function(el,htmlstr,onConfirm,onReady){var dlg,ctl,dlgwrap;ctl='<div class="s-btnline">'+'<a href="javascript:;" class="queding s-button-right _ok">确定</a>'+'<a href="javascript:;" class="quxiao s-button-back _cancel">取消</a></div>';var fullhtmlstr=['<div class="txt">','<p>',htmlstr,'</p>','<p class="edit-price-tip _price" style="display: none"></p>','<p class="c-tx3 _tip" style="display: none"></p>','</div>',ctl].join('');dlgwrap=GDT.modifier.layer(el,fullhtmlstr);J(dlgwrap).addClass('edit-price');J('._ok',dlgwrap).bind('click',function(){var rt;rt=onConfirm(J('._val',dlgwrap).val(),dlgwrap);rt!==false&&dlgwrap.parentNode.removeChild(dlgwrap);});J('._cancel',dlgwrap).bind('click',function(){dlgwrap.parentNode.removeChild(dlgwrap);dlgwrap=null;return false;});J.isFunction(onReady)&&onReady(dlgwrap);},droplist:function(el,htmlstr,onConfirm,onReady){var dlgwrap,ctl,pos;dlgwrap=GDT.modifier.layer(el,htmlstr+ctl);pos=J(el).position();J(dlgwrap).offset({left:pos.left+1,top:pos.top+pos.height});J(dlgwrap).bind('click',function(e){onConfirm(J('._val',e.target.parentNode).val());dlgwrap.parentNode.removeChild(dlgwrap);dlgwrap=null;});J.isFunction(onReady)&&onReady(dlgwrap);GDT.util.docClickEvent({unload:function(){if(dlgwrap){dlgwrap.parentNode.removeChild(dlgwrap);dlgwrap=null;}}});}};})();(function(){var noop=function(){},fn,fname;var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeStamp','trace','warn'],methmap={};var length=methods.length;GDT.console=window.console||{};while(length--){fname=methods[length];fn=GDT.console[fname];GDT.console[fname]=fn||noop;(!GDT.console[fname].apply&&Function.prototype.bind)&&(GDT.console[fname]=Function.prototype.bind.call(fn,GDT.console));methmap[methods[length]]=1;}
GDT.log=function(){var args=Array.prototype.slice.call(arguments),type,len=args.length,meth,fn;type=args[len-1];if(methmap[type]){meth=type;args.splice(len-1,1);}else{meth='log';}
fn=GDT.console[meth];fn.apply&&fn.apply(GDT.console,args);};}());GDT.sideBar=(function(){var here={};here.collapse=function(domId){domId=domId||'_sider';J('#'+domId).animate({width:'0'},600).css({overflow:'visible'});};here.expand=function(domId,width){domId=domId||'_sider';width=width||750;J('#'+domId).css('background','#fff').animate({width:width+'px'},600).css({overflow:'visible'});};return here;})();GDT.openingDropDowns=[];GDT.DropDownDialogHandler=function(buttonEle,clickEventMap,options){options=J.extend(options,{clickOutsideTriggerClose:true});this.options=options;this.wraper=J(buttonEle).parent();this.bind=function(){var th=this,op=th.options;GDT.log('DropDownDialogHandler bind',clickEventMap);J.each(clickEventMap,function(sele,func){J(sele,th.wraper).bind('click',func);});function bodyClickHandle(e){if(J.contains(th.wraper.get(0),e.target)){}else{th.hideDialog();J('body').unbind('click',bodyClickHandle);}}
if(op.clickOutsideTriggerClose){J('body').bind('click',bodyClickHandle);}};this.unbind=function(){var th=this;J.each(clickEventMap,function(sele,func){J(sele,th.wraper).unbind('click',func);})};this.beforeShowDialog=null;this.showDialog=function(){J.each(GDT.openingDropDowns,function(k,one){one.close();});GDT.openingDropDowns=[];this.beforeShowDialog&&this.beforeShowDialog.call(this);this.wraper.addClass('popon');this.wraper.find('div.nav-pop').show();GDT.openingDropDowns.push(this);};this.hideDialog=function(){this.wraper.removeClass('popon');this.wraper.find('div.nav-pop').hide();};this.onOk=function(){};this.close=function(){var th=this;th.unbind();th.hideDialog();};var th=this;clickEventMap=J.extend(clickEventMap,{'._cancel':function(e){e.stopPropagation();e.preventDefault();th.close();return false;},'._ok':function(e){e.stopPropagation();e.preventDefault();th.onOk();th.close();return false;}});this.bind();this.showDialog();};GDT.InlineEditHandler=function(configs){this.configs=J.extend({trigger:null,editDom:null,inputDom:null,submitButton:null,cancelButton:null,validate:null,cgiFunction:null,clickOutsideTriggerClose:true,editSuccess:null,extraData:null,beforeEditorShow:function(editdom){}},configs);var op=this.configs;this.bind=function(){J(op.trigger).bind('click',function(event){op.beforeEditorShow&&op.beforeEditorShow(op.editDom);J(op.editDom).show();event.stopPropagation();return false;});if(op.cancelButton){J(op.cancelButton).bind('click',function(event){J(op.editDom).hide();event.stopPropagation();return false;});}
if(op.clickOutsideTriggerClose){var bi=J('body').bind('click',function(event){var filterFn=op.triggerFilterFn;if(J.contains(op.editDom.get(0),event.target)||((typeof(filterFn)==='function')&&filterFn(event.target))){}else{J(op.editDom).hide();}})}
J(op.submitButton).bind('click',function(event){var value=J(op.inputDom).val();var vobj={};vobj[J(op.inputDom).attr('name')]=value;vobj=J.extend(vobj,op.extraData);var vl=op.validate(value);if(vl[0]=='valid'){op.cgiFunction(vobj,function(o){if(o.ret==0){op.editSuccess&&op.editSuccess(value);J(op.editDom).hide();}else{GDT.util.showMsgbox(o.msg||'系统繁忙',3);}})}else{GDT.util.showMsgbox(vl[1]||'输入错误',3);}
event.stopPropagation();})};this.bind();};